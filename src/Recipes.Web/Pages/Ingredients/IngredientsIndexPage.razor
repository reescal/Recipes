@page "/Ingredients"

<GridRow>
    <GridCol Flex=@("auto")>
        <AutoComplete TOption="string" @bind-Value="searchTerm">
            <OverlayTemplate>
                @foreach (var group in filteredIngredients)
                {
                    <AutoCompleteOptGroup Label="@group.Key">
                        <ChildContent>
                            @foreach (var option in group)
                            {
                                <AutoCompleteOption Value="@option" Label="@option.Name" />
                            }
                        </ChildContent>
                    </AutoCompleteOptGroup>
                }
            </OverlayTemplate>
        </AutoComplete>
    </GridCol>
    <GridCol Flex=@("32px")>
        <Button Type="@ButtonType.Default" Icon="@IconType.Outline.Plus" OnClick="@(() => _navManager.NavigateTo("/Ingredients/Create"))" />
    </GridCol>
</GridRow>

@foreach (var group in filteredIngredients)
{
    <Divider Orientation="left" Style="font-weight:bold">@group.Key</Divider>
    <AntList Grid="grid" DataSource="@group">
        <ListItem>
            <Card Size="small" Hoverable Bordered>
                <Cover>
                    <img src="@context.Image" />
                </Cover>
                <ChildContent>
                    <CardMeta Title="@context.Name" />
                </ChildContent>
                <ActionTemplate>
                    <CardAction><Icon Type="shopping-cart" OnClick="@(() => _groceryListService.AddGrocery(AsGrocery(context)))" /></CardAction>
                    <CardAction><Icon Type="profile" /></CardAction>
                    <CardAction><Icon Type="partition" /></CardAction>
                    <CardAction><Icon Type="edit" OnClick="@(() => _navManager.NavigateTo($"/Ingredients/Update/{context.Id}"))" /></CardAction>
                </ActionTemplate>
            </Card>
    </ListItem>
</AntList>
}

@code {
}